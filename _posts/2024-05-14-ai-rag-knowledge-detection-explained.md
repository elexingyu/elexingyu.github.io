---
categories: ['articles']
date: 2024-05-14
layout: post
style: huoshui
tags:
- AI
title: AI如何变身知识侦探人人都能懂的RAG科普
---

大语言模型（LLMs）因其在自然语言处理（NLP）领域展现出的能力引起广泛关注。与此同时，LLMs
也面临着一系列挑战，如生成内容的准确性、知识的时效性以及生成过程的透明度等。

**检索增强生成（Retrieval-AugmentedGeneration，简称 RAG）**
通过整合外部知识库中的信息，可提高生成文本的准确性和可信度。

## 什么是 RAG

LLMs 在处理超出其训练数据范围的查询时，可能会产生 “幻觉”，即生成与现实不符的信息，而且它们的知识往往过时，无法反映最新的研究和事件。

RAG 作为一种有前景的解决方案出现，能够提供实时更新的知识，增强 LLMs 在处理知识密集型任务时的准确性和可信度。它通过外部知识库的信息检索，克服了
LLMs 仅依赖参数化知识的局限性。

**RAG 就像是给机器人配备了一个巨大的、不断更新的电子图****书馆。** 当我们向机器人提问时，它不再只是依靠自己的
“记忆”（即程序员事先输入的信息）来回答，而是能够实时地去这个电子图书馆中 “查阅资料”，找到最相关的信息来回答我们。

RAG 技术的核心在于三个主要阶段：检索、生成和增强。在检索阶段，系统会根据用户的查询从知识库中检索相关的文档片段。

生成阶段则利用这些检索到的信息，结合原始查询，生成答案。在增强阶段，系统会进一步优化生成的答案，以提高其质量。就像你正在参加一个知识竞赛，你的队友是一位图书馆管理员。

每当你遇到一个难题，管理员就会飞快地跑到图书馆的各个角落，找到相关的书籍，然后告诉你答案。

## RAG 技术发展

RAG 技术已经发展出几种不同的范式，包括原生 RAG（NaiveRAG）、高级 RAG（AdvancedRAG）和模块化 RAG（ModularRAG）。

这些范式分别代表了 RAG 技术发展的不同阶段，从最初的简单检索和生成，到逐渐引入更复杂的优化策略和模块化设计。

### 原生 RAG：初代图书管理员

原生 RAG
的起点是建立一个索引，这就像是管理员为图书馆的每本书制作一个详细的目录。它会清洗和整理各种格式的资料，然后将这些资料切割成更小的片段，便于快速检索。

每个片段都被转换成一种数学上的表示形式 —— 向量，存储在一个类似于目录的数据库中。

当你提出问题时，原生 RAG 会将你的问题也转换成向量，并在这个数据库中寻找最相似的片段，就像管理员在目录中寻找最相关的书籍。

找到最相关的几个片段后，原生 RAG 就会将这些信息整合起来，试图构造出一个准确的答案。

这位初代图书管理员也有他的缺点，有时他找到的书并不太相关，或者可能漏掉了一些关键信息。

在回答问题时，他有时候会产生 “幻觉”，也就是给出了一个听起来合理但实际上却是错误的答案。整合各种来源的信息时，他有时会遇到难以协调一致的问题。

### 高级 RAG：升级的图书管理员

为了解决这些问题，于是就有了高级 RAG，即为图书管理员配备更高级的搜索工具和更精细的目录系统。

高级 RAG 通过使用滑动窗口等技术来改进索引，使得检索过程更加精确。它还采用了预检索和后检索策略，进一步提高了检索质量。

这位升级后的管理员在找书时更加高效，而且在整合信息时也更加精准。他能够更好地理解你的问题，找到更准确的资料来回答你。

### 模块化 RAG：定制化的图书管理员

模块化 RAG 的出现，就好比是为图书馆的管理员提供了更多定制化的工具。这种架构允许 RAG 系统根据不同的任务需求，调整其检索和生成的方式。

模块化 RAG 整合了多种策略，比如增加了专门的搜索模块，并通过微调来优化检索器。

这位定制化的图书管理员不仅知道如何找书，还知道如何根据不同竞赛的规则调整寻找答案的方式，从而更加有效地帮助你。

## 应用场景

在需要整合和利用外部知识库的复杂任务场景中，RAG 技术展示了其在提供准确、可靠和丰富的信息方面的强大能力，尤其是在需要整合和利用外部知识库的复杂任务中。

**问答系统** ：特别是开放领域问答（ODQA）任务，RAG 可以帮助模型从大量文本中检索相关信息，以准确回答用户的问题。

**代码搜索与生成** ：在软件开发中，RAG 可以帮助开发者通过检索相关的代码示例来辅助编程和调试。

**法律文档分析** ：在法律领域，RAG 可以帮助检索和理解大量的法律文献，以回答法律问题或辅助法律研究。

**医疗领域** ：RAG 在医疗领域可以帮助医生和研究人员从医学文献中检索相关的病例信息、治疗方法和药物信息。

**个性化推荐系统** ：结合用户的历史交互数据，RAG 可以帮助推荐系统检索和生成个性化的内容或产品推荐。

**教育辅助** ：RAG 可以辅助学生和教师通过检索相关教育资源来提高学习和教学的效率。

**搜索引擎优化** ：RAG 可以帮助搜索引擎更准确地理解查询意图，并从大量数据中检索到最相关的内容。

## 评估方法

评估 RAG 系统的性能需要考虑多个方面，包括检索质量、生成质量和模型所需的外部知识与模型适应性的需求。

目前，已经开发了一系列的基准测试和工具，如 RGB、RECALL、RAGAS 和 ARES，它们可以量化 RAG
模型在不同任务上的表现，并提供对模型能力的深入理解。

## 研究进展

研究表明，RAG 技术能有效降低大型语言模型（LLMs）生成错误事实内容的风险，并通过与 LLMs 的集成，提升了其在现实世界应用的适用性。

此外，RAG 支持持续的知识更新和领域特定信息的整合，为 LLMs 的应用带来了更高的灵活性和准确性。

尽管 RAG 技术取得了显著的进展，但仍面临一些挑战，比如如何处理大量的噪声或矛盾信息、如何提升 RAG
系统的鲁棒性、如何更精确和具有代表性的评估标准来衡量 RAG 技术的贡献等。

此外，随着 LLMs 在上下文理解能力的不断提升，是否仍有必要继续使用 RAG，以及如何与 LLMs 的长上下文处理能力结合，成为未来研究的重要方向。

  

### 参考文献

**论文标题** ：Retrieval-AugmentedGenerationforLargeLanguageModels:ASurvey

这篇综述论文对 RAG 范式的进展进行了全面详细的研究，包括 NaiveRAG、AdvancedRAG 和 ModularRAG，并仔细审视了 RAG
框架的三重基础：检索、生成和增强技术。

**论文地址** ：https://arxiv.org/abs/2312.10997

**关键词** ：大型语言模型，检索增强生成，自然语言处理，信息检索

* * *


## 推荐阅读

  • [提示工程 vs 微调 vs RAG？终于讲明白了](http://mp.weixin.qq.com/s?__biz=Mzk0OTY0NzM1Ng==&mid=2247484977&idx=1&sn=e5e4bcc108c8cf6f01dcc305c84fd6ed&chksm=c35464a2f423edb46defe0a8340c82f945a29fbabe851f024a6b13e171ae41f6703f3c3a1a07&scene=21#wechat_redirect)[](https://mp.weixin.qq.com/s?__biz=Mzk0OTY0NzM1Ng==&mid=2247485169&idx=1&sn=cd8f4d1be87702fdec14dfea200bd824&scene=21#wechat_redirect "开源大模型太多怎么选？一文读懂，5个最好的开源大模型！")

  • [RAG系统是如何工作的？附图及运用场景](http://mp.weixin.qq.com/s?__biz=Mzk0OTY0NzM1Ng==&mid=2247485065&idx=1&sn=b3bb902801311092ba14223464318da9&chksm=c354641af423ed0c52700f29999b3548542d132a565d7159ca3d5c54a9bcf5ac937753394e66&scene=21#wechat_redirect)[](https://mp.weixin.qq.com/s?__biz=Mzk0OTY0NzM1Ng==&mid=2247485309&idx=1&sn=2ad2a45d8d8433793c79b2cf29897fed&scene=21#wechat_redirect "哪些工作会被AI取代？分析了500万个自由职业之后，得出四个结论")

  • [应对RAG的缺陷！8种你不知道的方式](http://mp.weixin.qq.com/s?__biz=Mzk0OTY0NzM1Ng==&mid=2247485326&idx=1&sn=18055fc0ac952ef3ab28bb161d788e4b&chksm=c354651df423ec0b495937bf28e604bba54cfa407da3a95f51b5445ccddb436cc3370785f9c4&scene=21#wechat_redirect)